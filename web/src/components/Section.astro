---
import TaxonLink from './TaxonLink.astro'
const { title, fields } = Astro.props as {
  title: string
  fields: Record<string, string>
}
const filteredFieldsArray = Object.entries(fields).reduce(
  (acc, [name, text], _, array) => {
    if (!name.endsWith(' ID')) {
      if (array.some(([otherName]) => otherName === `${name} ID`)) {
        // skip
        return acc
      }
    }
    acc.push({ name, text })
    return acc
  },
  [] as { name: string; text: string }[]
)
---
{
  title && filteredFieldsArray.length > 0 && (
    <h2 class="pt-2 font-bold">{title}</h2>
  )
}
{
  filteredFieldsArray.map(({ name, text }) => {
    return (
      text && (
        <div>
          <span class="font-semibold">{name.replace(' ID', '')}:</span>{' '}
          <span>
            {name.endsWith(' ID') ? <TaxonLink taxonId={text} /> : text}
          </span>
        </div>
      )
    )
  })
}
